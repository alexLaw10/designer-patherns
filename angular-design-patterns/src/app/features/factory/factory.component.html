<div class="factory-demo">
  <div class="demo-header">
    <h2>üè≠ Factory Pattern</h2>
    <p>O Factory Pattern permite criar objetos sem especificar suas classes concretas.</p>
  </div>
  
  <div class="demo-content">
    <div class="creator-section">
      <h3>üî® Criar Ve√≠culo</h3>
      <div class="form-grid">
    <div class="form-group">
          <label>Tipo:</label>
          <select [(ngModel)]="vehicleType" class="form-select">
        <option *ngFor="let type of availableTypes" [value]="type">
              {{ getVehicleTypeIcon(type) }} {{ type | titlecase }}
        </option>
      </select>
    </div>
    
    <div class="form-group">
      <label>Marca:</label>
          <input type="text" [(ngModel)]="brand" placeholder="Ex: Toyota" class="form-input">
    </div>
    
    <div class="form-group">
      <label>Modelo:</label>
          <input type="text" [(ngModel)]="model" placeholder="Ex: Corolla" class="form-input">
    </div>
    
    <div class="form-group">
      <label>Ano:</label>
          <input type="number" [(ngModel)]="year" [min]="1900" [max]="currentYear" class="form-input">
        </div>
      </div>
      
      <button (click)="createVehicle()" class="btn-primary" [disabled]="!isFormValid()">
        üî® Criar Ve√≠culo
      </button>
    </div>
    
    <div class="vehicles-section">
      <h3>üöó Ve√≠culos Criados ({{ createdVehicles.length }})</h3>
    <div class="vehicles-list">
      <div *ngFor="let vehicle of createdVehicles; let i = index" 
           class="vehicle-item"
           [class.selected]="selectedVehicle === vehicle"
           (click)="selectVehicle(vehicle)">
          
          <div class="vehicle-header">
            <span class="vehicle-icon">{{ getVehicleTypeIcon(vehicle.constructor.name.toLowerCase()) }}</span>
            <span class="vehicle-type">{{ vehicle.constructor.name }}</span>
          </div>
          
        <div class="vehicle-info">
            <div class="vehicle-name">{{ vehicle.brand }} {{ vehicle.model }}</div>
            <div class="vehicle-specs">
              <span>Ano: {{ vehicle.year }}</span>
              <span>Tipo: {{ vehicle.constructor.name }}</span>
            </div>
          </div>
          
          <div class="vehicle-actions">
            <button (click)="removeVehicle(i); $event.stopPropagation()" class="btn-danger">
              üóëÔ∏è
            </button>
          </div>
        </div>
        
        <div *ngIf="createdVehicles.length === 0" class="empty-state">
        Nenhum ve√≠culo criado ainda
      </div>
    </div>
  </div>

    <div class="controls-section" *ngIf="selectedVehicle">
      <h3>üéÆ Controles</h3>
      <div class="control-panel">
        <div class="selected-info">
          <span class="selected-icon">{{ getVehicleTypeIcon(selectedVehicle.constructor.name.toLowerCase()) }}</span>
          <span class="selected-name">{{ selectedVehicle.getInfo() }}</span>
        </div>
        <div class="control-buttons">
          <button (click)="startVehicle()" class="btn-success">‚ñ∂Ô∏è Ligar</button>
          <button (click)="stopVehicle()" class="btn-warning">‚èπÔ∏è Desligar</button>
        </div>
      </div>
    </div>
    
    <div class="log-section">
      <h3>üìã Log de A√ß√µes</h3>
      <div class="log-controls">
        <button (click)="clearLog()" class="btn-secondary">üóëÔ∏è Limpar</button>
      </div>
      <div class="log-list">
        <div *ngFor="let log of actionLog" class="log-item">
          <span class="log-time">{{ getCurrentTime() }}</span>
          <span class="log-message">{{ log }}</span>
        </div>
        <div *ngIf="actionLog.length === 0" class="empty-state">
          Nenhuma a√ß√£o registrada
        </div>
      </div>
    </div>
  </div>

  <div class="explanation">
    <h3>üîç Contexto Completo do Factory Pattern</h3>
    <div class="explanation-content">
      <div class="concept">
        <h4>üìö Conceito e Origem</h4>
        <p>O Factory Pattern √© um padr√£o criacional fundamental da Gang of Four (GoF) que fornece uma interface para criar objetos sem especificar suas classes concretas. A factory decide qual classe instanciar baseado em par√¢metros fornecidos.</p>
        <p><strong>Hist√≥rico:</strong> Tamb√©m criado em 1994 pelos mesmos autores do Observer Pattern. √â um dos padr√µes mais utilizados em frameworks e bibliotecas modernas, especialmente em sistemas de inje√ß√£o de depend√™ncia.</p>
        <p><strong>Problema que resolve:</strong> Como criar objetos sem acoplar o c√≥digo √†s classes concretas? Como centralizar a l√≥gica de cria√ß√£o de objetos? Como facilitar a adi√ß√£o de novos tipos de objetos?</p>
      </div>
      
      <div class="real-world-examples">
        <h4>üåç Exemplos do Mundo Real</h4>
        <div class="examples-grid">
          <div class="example-card">
            <h5>üè≠ Frameworks de UI</h5>
            <ul>
              <li><strong>Angular:</strong> ComponentFactoryResolver</li>
              <li><strong>React:</strong> createElement, createFactory</li>
              <li><strong>Vue:</strong> createComponent, h() function</li>
              <li><strong>Flutter:</strong> Widget factories</li>
            </ul>
          </div>
          <div class="example-card">
            <h5>üóÑÔ∏è Bancos de Dados</h5>
            <ul>
              <li><strong>ORM:</strong> Entity factories</li>
              <li><strong>Migrations:</strong> Schema factories</li>
              <li><strong>Seeds:</strong> Data factories</li>
              <li><strong>Connections:</strong> Database factories</li>
            </ul>
          </div>
          <div class="example-card">
            <h5>üåê APIs e Integra√ß√µes</h5>
            <ul>
              <li><strong>HTTP Clients:</strong> Request factories</li>
              <li><strong>WebSockets:</strong> Connection factories</li>
              <li><strong>Payment Gateways:</strong> Processor factories</li>
              <li><strong>Email Services:</strong> Provider factories</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="components">
        <h4>üß© Componentes</h4>
        <div class="component-list">
          <div class="component">
            <strong>Product Interface:</strong>
            <ul>
              <li>Define a interface comum para todos os produtos</li>
              <li>Especifica os m√©todos que todos os produtos devem implementar</li>
              <li>Permite tratar diferentes produtos de forma uniforme</li>
            </ul>
          </div>
          <div class="component">
            <strong>Concrete Products:</strong>
            <ul>
              <li>Implementa√ß√µes espec√≠ficas da interface Product</li>
              <li>Cada produto tem suas pr√≥prias caracter√≠sticas</li>
              <li>Exemplos: Car, Motorcycle, Truck</li>
            </ul>
          </div>
          <div class="component">
            <strong>Factory:</strong>
            <ul>
              <li>Cont√©m a l√≥gica para decidir qual produto criar</li>
              <li>Encapsula a cria√ß√£o de objetos</li>
              <li>Retorna a interface comum, n√£o a implementa√ß√£o</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="flow">
        <h4>üîÑ Fluxo de Funcionamento</h4>
        <div class="flow-steps">
          <div class="flow-step">
            <span class="step-number">1</span>
            <div class="step-content">
              <strong>Solicita√ß√£o:</strong> Cliente solicita um produto via Factory
            </div>
          </div>
          <div class="flow-step">
            <span class="step-number">2</span>
            <div class="step-content">
              <strong>Decis√£o:</strong> Factory analisa os par√¢metros fornecidos
            </div>
          </div>
          <div class="flow-step">
            <span class="step-number">3</span>
            <div class="step-content">
              <strong>Cria√ß√£o:</strong> Factory instancia a classe apropriada
            </div>
          </div>
          <div class="flow-step">
            <span class="step-number">4</span>
            <div class="step-content">
              <strong>Retorno:</strong> Cliente recebe o objeto via interface comum
            </div>
          </div>
        </div>
      </div>
      
      <div class="benefits">
        <h4>‚úÖ Vantagens</h4>
        <ul>
          <li><strong>Encapsulamento:</strong> L√≥gica de cria√ß√£o centralizada</li>
          <li><strong>Flexibilidade:</strong> F√°cil adicionar novos tipos de produtos</li>
          <li><strong>Acoplamento baixo:</strong> Cliente n√£o depende de classes concretas</li>
          <li><strong>Reutiliza√ß√£o:</strong> Factory pode ser reutilizada em diferentes contextos</li>
          <li><strong>Manutenibilidade:</strong> Mudan√ßas na cria√ß√£o ficam isoladas</li>
        </ul>
      </div>
      
      <div class="use-cases">
        <h4>üéØ Casos de Uso Detalhados</h4>
        <div class="use-cases-grid">
          <div class="use-case">
            <h5>üè≠ Frameworks de UI</h5>
            <p>Cria√ß√£o din√¢mica de componentes baseada em configura√ß√£o ou tipo.</p>
            <ul>
              <li>Formul√°rios din√¢micos</li>
              <li>Dashboards configur√°veis</li>
              <li>Componentes de tabela</li>
              <li>Widgets personalizados</li>
            </ul>
          </div>
          <div class="use-case">
            <h5>üóÑÔ∏è Conectores de Banco</h5>
            <p>Diferentes drivers e conectores para diferentes SGBDs.</p>
            <ul>
              <li>MySQL, PostgreSQL, Oracle</li>
              <li>MongoDB, Redis, Cassandra</li>
              <li>Connection pooling</li>
              <li>Query builders</li>
            </ul>
          </div>
          <div class="use-case">
            <h5>üí≥ Processadores de Pagamento</h5>
            <p>Diferentes gateways e m√©todos de pagamento.</p>
            <ul>
              <li>Stripe, PayPal, PagSeguro</li>
              <li>Cart√£o, PIX, Boleto</li>
              <li>Fraud detection</li>
              <li>Webhook handlers</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="angular-specific">
        <h4>‚ö° Factory Pattern no Angular</h4>
        <div class="angular-examples">
          <div class="angular-example">
            <h5>üèóÔ∏è Dependency Injection</h5>
            <p>O Angular usa extensivamente o Factory Pattern atrav√©s do sistema de DI:</p>
            <ul>
              <li><strong>Providers:</strong> useFactory para cria√ß√£o customizada</li>
              <li><strong>Services:</strong> Cria√ß√£o baseada em configura√ß√£o</li>
              <li><strong>Components:</strong> Dynamic component creation</li>
              <li><strong>Guards:</strong> Route guards factory</li>
            </ul>
          </div>
          <div class="angular-example">
            <h5>üéØ Component Factory</h5>
            <p>ComponentFactoryResolver para cria√ß√£o din√¢mica de componentes:</p>
            <ul>
              <li>Modal dialogs din√¢micos</li>
              <li>Formul√°rios baseados em schema</li>
              <li>Widgets configur√°veis</li>
              <li>Plugin systems</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="variations">
        <h4>üîÑ Varia√ß√µes do Factory Pattern</h4>
        <div class="variations-grid">
          <div class="variation">
            <h5>üè≠ Simple Factory</h5>
            <p>Factory simples com um m√©todo est√°tico que retorna objetos baseado em par√¢metros.</p>
            <ul>
              <li>Mais simples de implementar</li>
              <li>Ideal para casos b√°sicos</li>
              <li>Menos flex√≠vel</li>
            </ul>
          </div>
          <div class="variation">
            <h5>üèóÔ∏è Factory Method</h5>
            <p>Classe abstrata com m√©todo factory abstrato, delegando cria√ß√£o para subclasses.</p>
            <ul>
              <li>Mais flex√≠vel</li>
              <li>Extens√≠vel via heran√ßa</li>
              <li>Ideal para fam√≠lias de produtos</li>
            </ul>
          </div>
          <div class="variation">
            <h5>üè≠ Abstract Factory</h5>
            <p>Factory de factories, criando fam√≠lias de objetos relacionados.</p>
            <ul>
              <li>M√°xima flexibilidade</li>
              <li>Fam√≠lias de produtos</li>
              <li>Mais complexo</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="best-practices">
        <h4>‚úÖ Melhores Pr√°ticas</h4>
        <div class="practices-grid">
          <div class="practice">
            <h5>üéØ Design</h5>
            <ul>
              <li>Use interfaces para desacoplar factory e produtos</li>
              <li>Implemente valida√ß√£o de par√¢metros</li>
              <li>Considere usar enums para tipos</li>
              <li>Documente claramente os tipos suportados</li>
            </ul>
          </div>
          <div class="practice">
            <h5>‚ö° Performance</h5>
            <ul>
              <li>Considere caching de inst√¢ncias</li>
              <li>Use lazy loading quando apropriado</li>
              <li>Implemente pooling para objetos caros</li>
              <li>Monitore uso de mem√≥ria</li>
            </ul>
          </div>
          <div class="practice">
            <h5>üêõ Error Handling</h5>
            <ul>
              <li>Valide par√¢metros de entrada</li>
              <li>Forne√ßa mensagens de erro claras</li>
              <li>Implemente fallbacks quando poss√≠vel</li>
              <li>Use logging para debugging</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="alternatives">
        <h4>üîÑ Alternativas e Padr√µes Relacionados</h4>
        <div class="alternatives-grid">
          <div class="alternative">
            <h5>üèóÔ∏è Builder Pattern</h5>
            <p>Para cria√ß√£o de objetos complexos com muitos par√¢metros opcionais.</p>
          </div>
          <div class="alternative">
            <h5>üéØ Prototype Pattern</h5>
            <p>Para clonagem de objetos existentes em vez de cria√ß√£o do zero.</p>
          </div>
          <div class="alternative">
            <h5>üíâ Dependency Injection</h5>
            <p>Para inje√ß√£o autom√°tica de depend√™ncias em vez de cria√ß√£o manual.</p>
          </div>
        </div>
      </div>
      
      <div class="code-example">
        <h4>üíª Exemplo de C√≥digo</h4>
        <div class="code-block">
          <pre><code>// Interface comum
interface Vehicle {{ '{' }}
  start(): string;
  stop(): string;
{{ '}' }}

// Factory
class VehicleFactory {{ '{' }}
  static createVehicle(type: string, brand: string, model: string, year: number): Vehicle {{ '{' }}
    switch(type) {{ '{' }}
      case 'car': return new Car(brand, model, year);
      case 'motorcycle': return new Motorcycle(brand, model, year);
      case 'truck': return new Truck(brand, model, year);
      default: throw new Error('Tipo n√£o suportado');
    {{ '}' }}
  {{ '}' }}
{{ '}' }}

// Uso
const vehicle = VehicleFactory.createVehicle('car', 'Toyota', 'Corolla', 2023);</code></pre>
    </div>
      </div>
    </div>
  </div>
</div>