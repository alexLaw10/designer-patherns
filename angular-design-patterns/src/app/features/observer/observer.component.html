<div class="observer-demo">
  <div class="demo-header">
    <h2>üëÅÔ∏è Observer Pattern</h2>
    <p>O Observer Pattern permite que objetos sejam notificados automaticamente sobre mudan√ßas de estado.</p>
  </div>
  
  <div class="demo-content">
    <div class="input-section">
      <h3>üì∞ Publicar Not√≠cia</h3>
      <div class="input-group">
        <input 
          type="text" 
          [(ngModel)]="newNews" 
          placeholder="Digite uma not√≠cia..."
          class="news-input"
          (keyup.enter)="addNews()">
        <button (click)="addNews()" class="btn-primary" [disabled]="!newNews.trim()">
          Publicar
        </button>
      </div>
    </div>
    
    <div class="observers-section">
      <h3>üë• Observadores ({{ observers.length }})</h3>
      <div class="observers-list">
        <div *ngFor="let observer of observers; let i = index" class="observer-item">
          <span class="observer-name">{{ observer.name }}</span>
          <span class="observer-role">{{ getObserverRole(i) }}</span>
        </div>
      </div>
      <button (click)="addObserver()" class="btn-secondary">+ Adicionar Observador</button>
    </div>
    
    <div class="news-section">
      <h3>üìã Feed de Not√≠cias</h3>
      <div class="news-list">
        <div *ngFor="let newsItem of news; let i = index" class="news-item">
          <span class="news-number">{{ i + 1 }}</span>
          <span class="news-content">{{ newsItem }}</span>
          <span class="news-time">{{ getCurrentTime() }}</span>
        </div>
        <div *ngIf="news.length === 0" class="empty-state">
          Nenhuma not√≠cia publicada ainda
        </div>
      </div>
    </div>
  </div>
  
  <div class="explanation">
    <h3>üîç Contexto Completo do Observer Pattern</h3>
    <div class="explanation-content">
      <div class="concept">
        <h4>üìö Conceito e Origem</h4>
        <p>O Observer Pattern √© um padr√£o comportamental fundamental da Gang of Four (GoF) que define uma depend√™ncia um-para-muitos entre objetos. Quando um objeto muda de estado, todos os seus dependentes s√£o notificados e atualizados automaticamente.</p>
        <p><strong>Hist√≥rico:</strong> Criado em 1994 por Erich Gamma, Richard Helm, Ralph Johnson e John Vlissides no livro "Design Patterns: Elements of Reusable Object-Oriented Software". √â um dos padr√µes mais antigos e amplamente utilizados em programa√ß√£o orientada a objetos.</p>
        <p><strong>Problema que resolve:</strong> Como notificar m√∫ltiplos objetos sobre mudan√ßas de estado sem criar acoplamento forte entre eles? Como manter a consist√™ncia entre objetos relacionados quando um deles muda?</p>
      </div>
      
      <div class="real-world-examples">
        <h4>üåç Exemplos do Mundo Real</h4>
        <div class="examples-grid">
          <div class="example-card">
            <h5>üì± Aplica√ß√µes Mobile</h5>
            <ul>
              <li><strong>Push Notifications:</strong> Servidor notifica todos os dispositivos</li>
              <li><strong>Atualiza√ß√µes de Estado:</strong> Mudan√ßas de rede, localiza√ß√£o</li>
              <li><strong>Eventos de UI:</strong> Toques, gestos, orienta√ß√£o</li>
            </ul>
          </div>
          <div class="example-card">
            <h5>üåê Desenvolvimento Web</h5>
            <ul>
              <li><strong>WebSockets:</strong> Atualiza√ß√µes em tempo real</li>
              <li><strong>Event Listeners:</strong> DOM events, custom events</li>
              <li><strong>State Management:</strong> Redux, Vuex, NgRx</li>
            </ul>
          </div>
          <div class="example-card">
            <h5>üè¢ Sistemas Empresariais</h5>
            <ul>
              <li><strong>Auditoria:</strong> Log de mudan√ßas em dados</li>
              <li><strong>Workflow:</strong> Notifica√ß√µes de aprova√ß√£o</li>
              <li><strong>Integra√ß√£o:</strong> Sincroniza√ß√£o entre sistemas</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="components">
        <h4>üß© Componentes</h4>
        <div class="component-list">
          <div class="component">
            <strong>Subject (Assunto):</strong>
            <ul>
              <li>Mant√©m uma lista de observadores</li>
              <li>Fornece m√©todos para adicionar/remover observadores</li>
              <li>Notifica todos os observadores quando h√° mudan√ßas</li>
            </ul>
          </div>
          <div class="component">
            <strong>Observer (Observador):</strong>
            <ul>
              <li>Define uma interface para receber notifica√ß√µes</li>
              <li>Implementa o m√©todo de atualiza√ß√£o</li>
              <li>Reage √†s mudan√ßas do subject</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="flow">
        <h4>üîÑ Fluxo de Funcionamento</h4>
        <div class="flow-steps">
          <div class="flow-step">
            <span class="step-number">1</span>
            <div class="step-content">
              <strong>Registro:</strong> Observadores se registram no Subject
            </div>
          </div>
          <div class="flow-step">
            <span class="step-number">2</span>
            <div class="step-content">
              <strong>Mudan√ßa:</strong> Subject detecta uma mudan√ßa de estado
            </div>
          </div>
          <div class="flow-step">
            <span class="step-number">3</span>
            <div class="step-content">
              <strong>Notifica√ß√£o:</strong> Subject notifica todos os observadores registrados
            </div>
          </div>
          <div class="flow-step">
            <span class="step-number">4</span>
            <div class="step-content">
              <strong>Atualiza√ß√£o:</strong> Cada observador reage √† notifica√ß√£o
            </div>
          </div>
        </div>
      </div>
      
      <div class="benefits">
        <h4>‚úÖ Vantagens</h4>
        <ul>
          <li><strong>Acoplamento baixo:</strong> Subject e Observer s√£o independentes</li>
          <li><strong>Extensibilidade:</strong> F√°cil adicionar novos observadores</li>
          <li><strong>Reutiliza√ß√£o:</strong> Observadores podem ser reutilizados</li>
          <li><strong>Notifica√ß√£o autom√°tica:</strong> Mudan√ßas s√£o propagadas automaticamente</li>
        </ul>
      </div>
      
      <div class="use-cases">
        <h4>üéØ Casos de Uso Detalhados</h4>
        <div class="use-cases-grid">
          <div class="use-case">
            <h5>üìß Sistemas de Notifica√ß√£o</h5>
            <p>Notifica√ß√µes por email, SMS, push notifications quando eventos importantes ocorrem no sistema.</p>
            <ul>
              <li>Novo usu√°rio registrado</li>
              <li>Pagamento processado</li>
              <li>Erro cr√≠tico no sistema</li>
            </ul>
          </div>
          <div class="use-case">
            <h5>üñ•Ô∏è Model-View (MVC/MVP/MVVM)</h5>
            <p>Atualiza√ß√£o autom√°tica da interface quando o modelo de dados muda.</p>
            <ul>
              <li>Angular: Data binding, change detection</li>
              <li>React: State updates, re-rendering</li>
              <li>Vue: Reactive data, watchers</li>
            </ul>
          </div>
          <div class="use-case">
            <h5>üìä Streaming de Dados</h5>
            <p>Processamento de dados em tempo real, como feeds de redes sociais ou dados de sensores.</p>
            <ul>
              <li>Twitter feeds</li>
              <li>Dados de IoT</li>
              <li>An√°lise de mercado</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="angular-specific">
        <h4>‚ö° Observer Pattern no Angular</h4>
        <div class="angular-examples">
          <div class="angular-example">
            <h5>üîÑ RxJS Observables</h5>
            <p>O Angular usa extensivamente o Observer Pattern atrav√©s do RxJS:</p>
            <ul>
              <li><strong>HTTP Requests:</strong> HttpClient retorna Observables</li>
              <li><strong>Forms:</strong> FormControl.valueChanges</li>
              <li><strong>Router:</strong> Router.events</li>
              <li><strong>Custom Events:</strong> EventEmitter, Subject</li>
            </ul>
          </div>
          <div class="angular-example">
            <h5>üéØ Change Detection</h5>
            <p>O sistema de detec√ß√£o de mudan√ßas do Angular √© baseado no Observer Pattern:</p>
            <ul>
              <li>Zonas (Zones) observam mudan√ßas</li>
              <li>Componentes s√£o notificados</li>
              <li>View √© atualizada automaticamente</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="best-practices">
        <h4>‚úÖ Melhores Pr√°ticas</h4>
        <div class="practices-grid">
          <div class="practice">
            <h5>üéØ Design</h5>
            <ul>
              <li>Use interfaces para desacoplar Subject e Observer</li>
              <li>Implemente m√©todos para adicionar/remover observadores</li>
              <li>Considere usar WeakMap para evitar memory leaks</li>
              <li>Documente claramente o contrato de notifica√ß√£o</li>
            </ul>
          </div>
          <div class="practice">
            <h5>‚ö° Performance</h5>
            <ul>
              <li>Evite notifica√ß√µes desnecess√°rias</li>
              <li>Use debounce/throttle quando apropriado</li>
              <li>Considere lazy loading de observadores</li>
              <li>Implemente batching para m√∫ltiplas mudan√ßas</li>
            </ul>
          </div>
          <div class="practice">
            <h5>üêõ Debugging</h5>
            <ul>
              <li>Adicione logging para notifica√ß√µes</li>
              <li>Use ferramentas de debugging do RxJS</li>
              <li>Implemente m√©tricas de performance</li>
              <li>Teste cen√°rios de falha</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="alternatives">
        <h4>üîÑ Alternativas e Varia√ß√µes</h4>
        <div class="alternatives-grid">
          <div class="alternative">
            <h5>üì° Publish-Subscribe (Pub/Sub)</h5>
            <p>Varia√ß√£o onde Subject e Observer n√£o se conhecem diretamente, usando um broker intermedi√°rio.</p>
          </div>
          <div class="alternative">
            <h5>üé™ Event Bus</h5>
            <p>Padr√£o global para comunica√ß√£o entre componentes distantes na hierarquia.</p>
          </div>
          <div class="alternative">
            <h5>üîÑ Reactive Programming</h5>
            <p>Paradigma que estende o Observer Pattern com operadores funcionais (RxJS, ReactiveX).</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>