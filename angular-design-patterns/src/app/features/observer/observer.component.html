<div class="observer-demo">
  <div class="demo-header">
    <h2>ğŸ‘ï¸ Observer Pattern</h2>
    <p>O Observer Pattern permite que objetos sejam notificados automaticamente sobre mudanÃ§as de estado.</p>
  </div>
  
  <div class="demo-content">
    <div class="input-section">
      <h3>ğŸ“° Publicar NotÃ­cia</h3>
      <div class="input-group">
        <input 
          type="text" 
          [(ngModel)]="newNews" 
          placeholder="Digite uma notÃ­cia..."
          class="news-input"
          (keyup.enter)="addNews()">
        <button (click)="addNews()" class="btn-primary" [disabled]="!newNews.trim()">
          Publicar
        </button>
      </div>
    </div>
    
    <div class="observers-section">
      <h3>ğŸ‘¥ Observadores ({{ observers.length }})</h3>
      <div class="observers-list">
        <div *ngFor="let observer of observers; let i = index" class="observer-item">
          <span class="observer-name">{{ observer.name }}</span>
          <span class="observer-role">{{ getObserverRole(i) }}</span>
        </div>
      </div>
      <button (click)="addObserver()" class="btn-secondary">+ Adicionar Observador</button>
    </div>
    
    <div class="news-section">
      <h3>ğŸ“‹ Feed de NotÃ­cias</h3>
      <div class="news-list">
        <div *ngFor="let newsItem of news; let i = index" class="news-item">
          <span class="news-number">{{ i + 1 }}</span>
          <span class="news-content">{{ newsItem }}</span>
          <span class="news-time">{{ getCurrentTime() }}</span>
        </div>
        <div *ngIf="news.length === 0" class="empty-state">
          Nenhuma notÃ­cia publicada ainda
        </div>
      </div>
    </div>
  </div>
  
  <div class="explanation">
    <h3>ğŸ” Contexto Completo do Observer Pattern</h3>
    <div class="explanation-content">
      <div class="concept">
        <h4>ğŸ“š Conceito e Origem</h4>
        <p>O Observer Pattern Ã© um padrÃ£o comportamental fundamental da Gang of Four (GoF) que define uma dependÃªncia um-para-muitos entre objetos. Quando um objeto muda de estado, todos os seus dependentes sÃ£o notificados e atualizados automaticamente.</p>
        <p><strong>HistÃ³rico:</strong> Criado em 1994 por Erich Gamma, Richard Helm, Ralph Johnson e John Vlissides no livro "Design Patterns: Elements of Reusable Object-Oriented Software". Ã‰ um dos padrÃµes mais antigos e amplamente utilizados em programaÃ§Ã£o orientada a objetos.</p>
        <p><strong>Problema que resolve:</strong> Como notificar mÃºltiplos objetos sobre mudanÃ§as de estado sem criar acoplamento forte entre eles? Como manter a consistÃªncia entre objetos relacionados quando um deles muda?</p>
      </div>
      
      <div class="real-world-examples">
        <h4>ğŸŒ Exemplos do Mundo Real</h4>
        <div class="examples-grid">
          <div class="example-card">
            <h5>ğŸ“± AplicaÃ§Ãµes Mobile</h5>
            <ul>
              <li><strong>Push Notifications:</strong> Servidor notifica todos os dispositivos</li>
              <li><strong>AtualizaÃ§Ãµes de Estado:</strong> MudanÃ§as de rede, localizaÃ§Ã£o</li>
              <li><strong>Eventos de UI:</strong> Toques, gestos, orientaÃ§Ã£o</li>
            </ul>
          </div>
          <div class="example-card">
            <h5>ğŸŒ Desenvolvimento Web</h5>
            <ul>
              <li><strong>WebSockets:</strong> AtualizaÃ§Ãµes em tempo real</li>
              <li><strong>Event Listeners:</strong> DOM events, custom events</li>
              <li><strong>State Management:</strong> Redux, Vuex, NgRx</li>
            </ul>
          </div>
          <div class="example-card">
            <h5>ğŸ¢ Sistemas Empresariais</h5>
            <ul>
              <li><strong>Auditoria:</strong> Log de mudanÃ§as em dados</li>
              <li><strong>Workflow:</strong> NotificaÃ§Ãµes de aprovaÃ§Ã£o</li>
              <li><strong>IntegraÃ§Ã£o:</strong> SincronizaÃ§Ã£o entre sistemas</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="components">
        <h4>ğŸ§© Componentes</h4>
        <div class="component-list">
          <div class="component">
            <strong>Subject (Assunto):</strong>
            <ul>
              <li>MantÃ©m uma lista de observadores</li>
              <li>Fornece mÃ©todos para adicionar/remover observadores</li>
              <li>Notifica todos os observadores quando hÃ¡ mudanÃ§as</li>
            </ul>
          </div>
          <div class="component">
            <strong>Observer (Observador):</strong>
            <ul>
              <li>Define uma interface para receber notificaÃ§Ãµes</li>
              <li>Implementa o mÃ©todo de atualizaÃ§Ã£o</li>
              <li>Reage Ã s mudanÃ§as do subject</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="flow">
        <h4>ğŸ”„ Fluxo de Funcionamento</h4>
        <div class="flow-steps">
          <div class="flow-step">
            <span class="step-number">1</span>
            <div class="step-content">
              <strong>Registro:</strong> Observadores se registram no Subject
            </div>
          </div>
          <div class="flow-step">
            <span class="step-number">2</span>
            <div class="step-content">
              <strong>MudanÃ§a:</strong> Subject detecta uma mudanÃ§a de estado
            </div>
          </div>
          <div class="flow-step">
            <span class="step-number">3</span>
            <div class="step-content">
              <strong>NotificaÃ§Ã£o:</strong> Subject notifica todos os observadores registrados
            </div>
          </div>
          <div class="flow-step">
            <span class="step-number">4</span>
            <div class="step-content">
              <strong>AtualizaÃ§Ã£o:</strong> Cada observador reage Ã  notificaÃ§Ã£o
            </div>
          </div>
        </div>
      </div>
      
      <div class="benefits">
        <h4>âœ… Vantagens</h4>
        <ul>
          <li><strong>Acoplamento baixo:</strong> Subject e Observer sÃ£o independentes</li>
          <li><strong>Extensibilidade:</strong> FÃ¡cil adicionar novos observadores</li>
          <li><strong>ReutilizaÃ§Ã£o:</strong> Observadores podem ser reutilizados</li>
          <li><strong>NotificaÃ§Ã£o automÃ¡tica:</strong> MudanÃ§as sÃ£o propagadas automaticamente</li>
        </ul>
      </div>
      
      <div class="use-cases">
        <h4>ğŸ¯ Casos de Uso Detalhados</h4>
        <div class="use-cases-grid">
          <div class="use-case">
            <h5>ğŸ“§ Sistemas de NotificaÃ§Ã£o</h5>
            <p>NotificaÃ§Ãµes por email, SMS, push notifications quando eventos importantes ocorrem no sistema.</p>
            <ul>
              <li>Novo usuÃ¡rio registrado</li>
              <li>Pagamento processado</li>
              <li>Erro crÃ­tico no sistema</li>
            </ul>
          </div>
          <div class="use-case">
            <h5>ğŸ–¥ï¸ Model-View (MVC/MVP/MVVM)</h5>
            <p>AtualizaÃ§Ã£o automÃ¡tica da interface quando o modelo de dados muda.</p>
            <ul>
              <li>Angular: Data binding, change detection</li>
              <li>React: State updates, re-rendering</li>
              <li>Vue: Reactive data, watchers</li>
            </ul>
          </div>
          <div class="use-case">
            <h5>ğŸ“Š Streaming de Dados</h5>
            <p>Processamento de dados em tempo real, como feeds de redes sociais ou dados de sensores.</p>
            <ul>
              <li>Twitter feeds</li>
              <li>Dados de IoT</li>
              <li>AnÃ¡lise de mercado</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="angular-specific">
        <h4>âš¡ Observer Pattern no Angular</h4>
        <div class="angular-examples">
          <div class="angular-example">
            <h5>ğŸ”„ RxJS Observables</h5>
            <p>O Angular usa extensivamente o Observer Pattern atravÃ©s do RxJS:</p>
            <ul>
              <li><strong>HTTP Requests:</strong> HttpClient retorna Observables</li>
              <li><strong>Forms:</strong> FormControl.valueChanges</li>
              <li><strong>Router:</strong> Router.events</li>
              <li><strong>Custom Events:</strong> EventEmitter, Subject</li>
            </ul>
          </div>
          <div class="angular-example">
            <h5>ğŸ¯ Change Detection</h5>
            <p>O sistema de detecÃ§Ã£o de mudanÃ§as do Angular Ã© baseado no Observer Pattern:</p>
            <ul>
              <li>Zonas (Zones) observam mudanÃ§as</li>
              <li>Componentes sÃ£o notificados</li>
              <li>View Ã© atualizada automaticamente</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="best-practices">
        <h4>âœ… Melhores PrÃ¡ticas</h4>
        <div class="practices-grid">
          <div class="practice">
            <h5>ğŸ¯ Design</h5>
            <ul>
              <li>Use interfaces para desacoplar Subject e Observer</li>
              <li>Implemente mÃ©todos para adicionar/remover observadores</li>
              <li>Considere usar WeakMap para evitar memory leaks</li>
              <li>Documente claramente o contrato de notificaÃ§Ã£o</li>
            </ul>
          </div>
          <div class="practice">
            <h5>âš¡ Performance</h5>
            <ul>
              <li>Evite notificaÃ§Ãµes desnecessÃ¡rias</li>
              <li>Use debounce/throttle quando apropriado</li>
              <li>Considere lazy loading de observadores</li>
              <li>Implemente batching para mÃºltiplas mudanÃ§as</li>
            </ul>
          </div>
          <div class="practice">
            <h5>ğŸ› Debugging</h5>
            <ul>
              <li>Adicione logging para notificaÃ§Ãµes</li>
              <li>Use ferramentas de debugging do RxJS</li>
              <li>Implemente mÃ©tricas de performance</li>
              <li>Teste cenÃ¡rios de falha</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="alternatives">
        <h4>ğŸ”„ Alternativas e VariaÃ§Ãµes</h4>
        <div class="alternatives-grid">
          <div class="alternative">
            <h5>ğŸ“¡ Publish-Subscribe (Pub/Sub)</h5>
            <p>VariaÃ§Ã£o onde Subject e Observer nÃ£o se conhecem diretamente, usando um broker intermediÃ¡rio.</p>
          </div>
          <div class="alternative">
            <h5>ğŸª Event Bus</h5>
            <p>PadrÃ£o global para comunicaÃ§Ã£o entre componentes distantes na hierarquia.</p>
          </div>
          <div class="alternative">
            <h5>ğŸ”„ Reactive Programming</h5>
            <p>Paradigma que estende o Observer Pattern com operadores funcionais (RxJS, ReactiveX).</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>